require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([6],{55:function(e,t,i){"use strict";var a=l(i(4)),r=l(i(56));function l(e){return e&&e.__esModule?e:{default:e}}Page((0,a.default)(r.default))},56:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(58),r=i.n(a),l=i(63),s=!1;var n=function(e){s||i(57)},c=i(0)(r.a,l.a,n,null,null);c.options.__file="..\\..\\..\\..\\用户目录\\我的文档\\HBuilderProjects\\ysv8\\pages\\myweb\\add.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] add.vue: functional components are not supported with templates, they should use render functions."),t.default=c.exports},57:function(e,t){},58:function(t,i,a){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0});var r=c(a(10)),l=c(a(2)),s=c(a(3)),n=c(a(59));function c(e){return e&&e.__esModule?e:{default:e}}var u=[["camera"],["album"],["camera","album"]],o=[["compressed"],["original"],["compressed","original"]];i.default={components:{uniIcon:s.default,mpvuePicker:n.default},onShareAppMessage:function(){return{title:this.title+"_YSV8简单网站",path:"/pages/index/index"}},data:function(){return{title:l.default.title,shangstart:!1,pickerValueDefault:[0],themeColor:"#007AFF",mode:"",deepLength:1,pickerValueArray:[],forum:[],fid:0,imageList:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:2,count:[1,2,3,4,5,6,7,8,9],src:"",website:l.default.website,www:l.default.www,mask:{postactive:"blog/post"},text:"",fidtext:"选择"}},onLoad:function(e){if(e.website&&(this.website=e.website),this.www="https://"+this.website+"."+l.default.Domain+".com/",this.get_Forum(),e.fid&&e.fidtext)this.fid=e.fid,this.fidtext=e.fidtext;else if(0==l.default.userdata)return t.showModal({content:"请登录",showCancel:!1,success:function(e){t.navigateTo({url:"/pages/user/index"})}}),!1},methods:{get_Forum:function(){var i=this;t.request({method:"POST",url:this.www+"/blog/a.api",data:{YSV8_HEX:l.default.ysv8hex},success:function(e){var t=e.data.data;for(var a in t)t[a].label=t[a].name,t[a].value=t[a].id;i.forum=t},fail:function(a){t.showModal({content:"网络故障",showCancel:!1}),i.newsitems[e].loadingType=0},complete:function(){}})},onCancel:function(e){},onConfirm:function(e){console.log(e.value[0]),this.fid=e.value[0],this.fidtext=e.label},showSinglePicker:function(){this.pickerValueArray=this.pickerSingleArray,this.mode="selector",this.pickerValueDefault=[0],this.$refs.mpvuePicker.show()},postsub:function(e){var i=this,a=this,r=e.detail.value;return this.fid<1?(t.showModal({content:"栏目为空",showCancel:!1,success:function(){a.showSinglePicker()}}),!1):r.title.length<4||r.content.length<10?(t.showModal({content:"内容太少",showCancel:!1}),!1):void t.request({method:"POST",url:this.www+this.mask.postactive+".api",data:{title:r.title,content:r.content,fid:this.fid,imgv:this.imageList.join(","),vs:this.src,text:1,YSV8_HEX:l.default.ysv8hex},success:function(e){var a=e.data;t.showModal({content:a.info,showCancel:!1}),200==a.code?t.redirectTo({url:"t?id="+a.id+"&website="+i.website}):l.default.muialert(a)},fail:function(e){t.showModal({content:e.errMsg,showCancel:!1})},complete:function(){}})},autotext:function(e){return l.default.langfun(e)},timestr:function(e){return l.default.timeStamp2String(e)},opendiv:function(){this.postno=!this.postno},post:function(){this.text="",this.postno=!this.postno},chooseImage:function(){var e,i=(e=r.default.mark(function e(){var i,a=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(8!==this.imageList.length){e.next=7;break}return e.next=3,this.isFullImg();case 3:if(i=e.sent,console.log("是否继续?",i),i){e.next=7;break}return e.abrupt("return");case 7:t.chooseImage({sourceType:u[this.sourceTypeIndex],sizeType:o[this.sizeTypeIndex],count:this.imageList.length+this.count[this.countIndex]>8?8-this.imageList.length:this.count[this.countIndex],success:function(e){for(var i in e.tempFilePaths){var r=e.tempFilePaths[i];t.uploadFile({url:l.default.www+"post/upload.api",filePath:r,name:"photo",formData:{YSV8_HEX:l.default.ysv8hex},success:function(e){var i=JSON.parse(e.data);if("200"!=i.code)return l.default.muialert(i),!1;t.showToast({title:"上传成功",icon:"success",duration:1e3}),a.imageList=a.imageList.concat(i.url)},fail:function(e){console.log("uploadImage fail",e),t.showModal({content:e.errMsg,showCancel:!1}),t.hideLoading()},complete:function(){console.log("complate")}})}}});case 8:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,i){return function a(r,l){try{var s=t[r](l),n=s.value}catch(e){return void i(e)}if(!s.done)return Promise.resolve(n).then(function(e){a("next",e)},function(e){a("throw",e)});e(n)}("next")})});return function(){return i.apply(this,arguments)}}(),isFullImg:function(){var e=this;return new Promise(function(i){t.showModal({content:"已经有3张图片了,是否清空现有图片？",success:function(t){t.confirm?(e.imageList=[],i(!0)):i(!1)},fail:function(){i(!1)}})})},previewImage:function(e){var i=e.target.dataset.src;t.previewImage({current:i,urls:this.imageList})},chooseVideo:function(){var e=this;t.chooseVideo({sourceType:u[this.sourceTypeIndex],success:function(i){var a=i.tempFilePath;t.uploadFile({url:l.default.www+"post/uploadfile.api",filePath:a,name:"photo",formData:{YSV8_HEX:l.default.ysv8hex},success:function(i){var a=JSON.parse(i.data);if("200"!=a.code)return l.default.muialert(a),!1;t.showToast({title:"上传成功",icon:"success",duration:1e3}),e.src=e.imageList.concat(a.name)},fail:function(e){console.log("uploadImage fail",e),t.showModal({content:e.errMsg,showCancel:!1}),t.hideLoading()},complete:function(){console.log("complate")}})}})}}}}).call(i,a(1).default)},59:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(61),r=i.n(a),l=i(62),s=!1;var n=function(e){s||i(60)},c=i(0)(r.a,l.a,n,null,null);c.options.__file="..\\..\\..\\..\\用户目录\\我的文档\\HBuilderProjects\\ysv8\\components\\mpvue-picker\\mpvuePicker.vue",c.esModule&&Object.keys(c.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] mpvuePicker.vue: functional components are not supported with templates, they should use render functions."),t.default=c.exports},60:function(e,t){},61:function(e,t,i){"use strict";var a,r,l;Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{pickerChangeValue:[],pickerValue:[],pickerValueArrayChange:!0,modeChange:!1,pickerValueSingleArray:[],pickerValueHour:[],pickerValueMinute:[],pickerValueMulArray:[],pickerValueMulTwoOne:[],pickerValueMulTwoTwo:[],pickerValueMulThreeOne:[],pickerValueMulThreeTwo:[],pickerValueMulThreeThree:[],showPicker:!1}},props:{mode:{type:String,default:"selector"},pickerValueArray:{type:Array,default:function(){return[]}},pickerValueDefault:{type:Array,default:function(){return[]}},deepLength:{type:Number,default:2},themeColor:String},watch:(a={pickerValueArray:function(e,t){this.pickerValueArrayChange=!0},mode:function(e,t){this.modeChange=!0}},r="pickerValueArray",l=function(e){this.initPicker(e)},r in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l,a),methods:{initPicker:function(e){var t=e;if(this.pickerValue=this.pickerValueDefault,"selector"===this.mode)this.pickerValueSingleArray=e;else if("timeSelector"===this.mode){this.modeChange=!1;for(var i=[],a=[],r=0;r<24;r++)i.push({value:r,label:r>9?r+" 时":"0"+r+" 时"});for(var l=0;l<60;l++)a.push({value:l,label:l>9?l+" 分":"0"+l+" 分"});this.pickerValueHour=i,this.pickerValueMinute=a}else if("multiSelector"===this.mode)this.pickerValueMulArray=e;else if("multiLinkageSelector"===this.mode&&2===this.deepLength){for(var s=[],n=[],c=0,u=t.length;c<u;c++)s.push(t[c]);if(2===this.pickerValueDefault.length)for(var o=this.pickerValueDefault[0],h=0,p=t[o].children.length;h<p;h++)n.push(t[o].children[h]);else for(var d=0,k=t[0].children.length;d<k;d++)n.push(t[0].children[d]);this.pickerValueMulTwoOne=s,this.pickerValueMulTwoTwo=n}else if("multiLinkageSelector"===this.mode&&3===this.deepLength){for(var f=[],m=[],v=[],w=0,g=t.length;w<g;w++)f.push(t[w]);if(this.pickerValueDefault=3===this.pickerValueDefault.length?this.pickerValueDefault:[0,0,0],3===this.pickerValueDefault.length){for(var V=this.pickerValueDefault[0],_=0,b=t[V].children.length;_<b;_++)m.push(t[V].children[_]);for(var y=this.pickerValueDefault[1],C=0,T=t[V].children[y].children.length;C<T;C++)v.push(t[V].children[y].children[C])}this.pickerValueMulThreeOne=f,this.pickerValueMulThreeTwo=m,this.pickerValueMulThreeThree=v}},show:function(){var e=this;setTimeout(function(){e.pickerValueArrayChange||e.modeChange?(e.initPicker(e.pickerValueArray),e.showPicker=!0,e.pickerValueArrayChange=!1,e.modeChange=!1):e.showPicker=!0},0)},maskClick:function(){this.pickerCancel()},pickerCancel:function(){this.showPicker=!1,this._initPickerVale();var e={index:this.pickerValue,value:this._getPickerLabelAndValue(this.pickerValue,this.mode).value,label:this._getPickerLabelAndValue(this.pickerValue,this.mode).label};this.$emit("onCancel",e)},pickerConfirm:function(e){this.showPicker=!1,this._initPickerVale();var t={index:this.pickerValue,value:this._getPickerLabelAndValue(this.pickerValue,this.mode).value,label:this._getPickerLabelAndValue(this.pickerValue,this.mode).label};this.$emit("onConfirm",t)},showPickerView:function(){this.showPicker=!0},pickerChange:function(e){this.pickerValue=e.mp.detail.value;var t={index:this.pickerValue,value:this._getPickerLabelAndValue(this.pickerValue,this.mode).value,label:this._getPickerLabelAndValue(this.pickerValue,this.mode).label};this.$emit("onChange",t)},pickerChangeMul:function(e){if(2===this.deepLength){var t=this.pickerValueArray,i=e.mp.detail.value;if(i[0]!==this.pickerValue[0]){for(var a=[],r=0,l=t[i[0]].children.length;r<l;r++)a.push(t[i[0]].children[r]);this.pickerValueMulTwoTwo=a,i[1]=0}this.pickerValue=i}else if(3===this.deepLength){var s=this.pickerValueArray,n=e.mp.detail.value,c=[],u=[];if(n[0]!==this.pickerValue[0]){this.pickerValueMulThreeTwo=[];for(var o=0,h=s[n[0]].children.length;o<h;o++)c.push(s[n[0]].children[o]);for(var p=0,d=s[n[0]].children[0].children.length;p<d;p++)u.push(s[n[0]].children[0].children[p]);n[1]=0,n[2]=0,this.pickerValueMulThreeTwo=c,this.pickerValueMulThreeThree=u}else if(n[1]!==this.pickerValue[1]){this.pickerValueMulThreeThree=[],c=this.pickerValueMulThreeTwo;for(var k=0,f=s[n[0]].children[n[1]].children.length;k<f;k++)u.push(s[n[0]].children[n[1]].children[k]);n[2]=0,this.pickerValueMulThreeThree=u}this.pickerValue=n}var m={index:this.pickerValue,value:this._getPickerLabelAndValue(this.pickerValue,this.mode).value,label:this._getPickerLabelAndValue(this.pickerValue,this.mode).label};this.$emit("onChange",m)},_getPickerLabelAndValue:function(e,t){var i=void 0,a=[];if("selector"===t)i=this.pickerValueSingleArray[e].label,a.push(this.pickerValueSingleArray[e].value);else if("timeSelector"===t)i=this.pickerValueHour[e[0]].label+"-"+this.pickerValueMinute[e[1]].label,a.push(this.pickerValueHour[e[0]].value),a.push(this.pickerValueHour[e[1]].value);else if("multiSelector"===t)for(var r=0;r<e.length;r++)r>0?i+=this.pickerValueMulArray[r][e[r]].label+(r===e.length-1?"":"-"):i=this.pickerValueMulArray[r][e[r]].label+"-",a.push(this.pickerValueMulArray[r][e[r]].value);else"multiLinkageSelector"===t&&(i=2===this.deepLength?this.pickerValueMulTwoOne[e[0]].label+"-"+this.pickerValueMulTwoTwo[e[1]].label:this.pickerValueMulThreeOne[e[0]].label+"-"+this.pickerValueMulThreeTwo[e[1]].label+"-"+this.pickerValueMulThreeThree[e[2]].label,2===this.deepLength?(a.push(this.pickerValueMulTwoOne[e[0]].value),a.push(this.pickerValueMulTwoTwo[e[1]].value)):(a.push(this.pickerValueMulThreeOne[e[0]].value),a.push(this.pickerValueMulThreeTwo[e[1]].value),a.push(this.pickerValueMulThreeThree[e[2]].value)));return{label:i,value:a}},_initPickerVale:function(){0===this.pickerValue.length&&("selector"===this.mode?this.pickerValue=[0]:"multiSelector"===this.mode?this.pickerValue=new Int8Array(this.pickerValueArray.length):"multiLinkageSelector"===this.mode&&2===this.deepLength?this.pickerValue=[0,0]:"multiLinkageSelector"===this.mode&&3===this.deepLength&&(this.pickerValue=[0,0,0]))}}}},62:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"mpvue-picker"},[i("view",{class:{pickerMask:e.showPicker},attrs:{catchtouchmove:"true",eventid:"drA-0"},on:{click:e.maskClick}}),i("view",{staticClass:"mpvue-picker-content ",class:{"mpvue-picker-view-show":e.showPicker}},[i("view",{staticClass:"mpvue-picker__hd",attrs:{catchtouchmove:"true"}},[i("view",{staticClass:"mpvue-picker__action",attrs:{eventid:"ehO-1"},on:{click:e.pickerCancel}},[e._v("取消")]),i("view",{staticClass:"mpvue-picker__action",style:{color:e.themeColor},attrs:{eventid:"uv2-2"},on:{click:e.pickerConfirm}},[e._v("确定")])]),"selector"===e.mode&&e.pickerValueSingleArray.length>0?i("picker-view",{staticClass:"mpvue-picker-view",attrs:{"indicator-style":"height: 40px;",value:e.pickerValue,eventid:"v7J-3"},on:{change:e.pickerChange}},[i("block",[i("picker-view-column",{attrs:{mpcomid:"HkE-0"}},e._l(e.pickerValueSingleArray,function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])}))],1)],1):e._e(),"timeSelector"===e.mode?i("picker-view",{staticClass:"mpvue-picker-view",attrs:{"indicator-style":"height: 40px;",value:e.pickerValue,eventid:"Jjf-4"},on:{change:e.pickerChange}},[i("block",[i("picker-view-column",{attrs:{mpcomid:"d6q-1"}},e._l(e.pickerValueHour,function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])})),i("picker-view-column",{attrs:{mpcomid:"9sR-2"}},e._l(e.pickerValueMinute,function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])}))],1)],1):e._e(),"multiSelector"===e.mode?i("picker-view",{staticClass:"mpvue-picker-view",attrs:{"indicator-style":"height: 40px;",value:e.pickerValue,eventid:"o2r-5"},on:{change:e.pickerChange}},e._l(e.pickerValueMulArray.length,function(t,a){return i("block",{key:a},[i("picker-view-column",{attrs:{mpcomid:"vu8-3-"+a}},e._l(e.pickerValueMulArray[t],function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])}))],1)})):e._e(),"multiLinkageSelector"===e.mode&&2===e.deepLength?i("picker-view",{staticClass:"mpvue-picker-view",attrs:{"indicator-style":"height: 40px;",value:e.pickerValue,eventid:"nbO-6"},on:{change:e.pickerChangeMul}},[i("block",[i("picker-view-column",{attrs:{mpcomid:"MMo-4"}},e._l(e.pickerValueMulTwoOne,function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])})),i("picker-view-column",{attrs:{mpcomid:"1sY-5"}},e._l(e.pickerValueMulTwoTwo,function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])}))],1)],1):e._e(),"multiLinkageSelector"===e.mode&&3===e.deepLength?i("picker-view",{staticClass:"mpvue-picker-view",attrs:{"indicator-style":"height: 40px;",value:e.pickerValue,eventid:"dHn-7"},on:{change:e.pickerChangeMul}},[i("block",[i("picker-view-column",{attrs:{mpcomid:"dEj-6"}},e._l(e.pickerValueMulThreeOne,function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])})),i("picker-view-column",{attrs:{mpcomid:"uvh-7"}},e._l(e.pickerValueMulThreeTwo,function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])})),i("picker-view-column",{attrs:{mpcomid:"PMC-8"}},e._l(e.pickerValueMulThreeThree,function(t,a){return i("view",{key:a,staticClass:"picker-item"},[e._v(e._s(t.label))])}))],1)],1):e._e()],1)])};a._withStripped=!0;var r={render:a,staticRenderFns:[]};t.a=r},63:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",[i("view",{staticClass:"postarea"},[i("form",{attrs:{eventid:"cU1-3"},on:{submit:e.postsub}},[i("input",{staticClass:"uni-input",attrs:{maxlength:"60",name:"title",placeholder:"标题"}}),i("textarea",{staticClass:"posttextarea",attrs:{"placeholder-style":"color:#F76260",name:"content",placeholder:"请输入评论内容",maxlength:"65535","auto-height":"",value:e.text}}),i("view",{staticClass:"row bj"},[i("view",{staticClass:"col"},[i("view",{staticClass:"col_3"},[i("button",{attrs:{type:"default",eventid:"TtJ-0"},on:{click:e.showSinglePicker}},[e._v(e._s(e.fidtext))])],1),i("view",{staticClass:"col_3"},[i("button",{attrs:{type:"primary",formType:"submit"}},[e._v("提交")])],1),i("view",{staticClass:"col_3 padding-top"},[i("uni-icon",{staticClass:"blue",attrs:{size:"30",type:"image",eventid:"uRJ-1",mpcomid:"mhK-0"},on:{click:e.chooseImage}})],1),i("view",{staticClass:"col_3 padding-top"},[i("uni-icon",{staticClass:"blue",attrs:{size:"30",type:"videocam",eventid:"UAJ-2",mpcomid:"21i-1"},on:{click:e.chooseVideo}})],1)])])])],1),i("view",{staticClass:"uni-list list-pd"},[i("view",{staticClass:"uni-list-cell cell-pd"},[i("view",{staticClass:"uni-uploader"},[i("view",{staticClass:"uni-uploader-body"},[i("view",{staticClass:"uni-uploader__files"},[e._l(e.imageList,function(t,a){return i("block",{key:a},[i("view",{staticClass:"uni-uploader__file"},[i("image",{staticClass:"uni-uploader__img",attrs:{src:t,"data-src":t,eventid:"kbB-4-"+a},on:{click:e.previewImage}})])])}),e.src?i("view",{staticClass:"uni-uploader__file"},[i("video",{staticClass:"video",attrs:{src:e.src}})]):e._e()],2)])])])]),i("mpvue-picker",{ref:"mpvuePicker",attrs:{themeColor:e.themeColor,mode:e.mode,deepLength:e.deepLength,pickerValueDefault:e.pickerValueDefault,pickerValueArray:e.forum,eventid:"UsU-5",mpcomid:"Ir3-2"},on:{onConfirm:e.onConfirm,onCancel:e.onCancel}})],1)};a._withStripped=!0;var r={render:a,staticRenderFns:[]};t.a=r}},[55]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/myweb/add.js.map